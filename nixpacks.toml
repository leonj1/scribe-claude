# ⚠️ DEPRECATED: This root-level nixpacks.toml is NOT the correct configuration
#
# This file should NOT be used for Railway deployments.
# Railway should be configured to use the backend/ directory as the root directory.
#
# CORRECT SETUP:
# 1. In Railway dashboard, set "Root Directory" to "backend"
# 2. Railway will then use backend/nixpacks.toml (which has the correct config)
#
# The configuration below is a workaround and causes build issues.
# It should be removed once Railway is properly configured.

# DO NOT USE - Use backend/nixpacks.toml instead
[phases.setup]
nixPkgs = ["python311", "ffmpeg"]

[phases.install]
cmds = ["cd backend && python -m pip install -r requirements.txt"]

[phases.build]
cmds = ["mkdir -p backend/audio_storage"]

[start]
cmd = "cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT"
